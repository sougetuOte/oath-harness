# フルセーブ

プロジェクトルートの `SESSION_STATE.md` + `/commit`（ドキュメント同期付きコミット） + Daily 記録。
一日の終わりや大きな区切りで使用する。

**コンテキストガード**: 残量が 15% 未満の場合、フルセーブはコンテキストを大量消費するため `/quick-save` にフォールバックしてユーザーに通知すること。

## 1. コンテキスト残量チェック

残量 15% 未満と判断した場合:
```
--- フルセーブ中断 ---
コンテキスト残量が少ないため /quick-save に切り替えます。
git commit/push と Daily は次セッションで実行してください。
---
```
→ /quick-save の手順を実行して終了。

## 2. SESSION_STATE.md を書き出す（プロジェクトルート直下）

以下の内容を **簡潔に** 記録（各項目は箇条書き数行で十分）:

### 完了タスク
- 今回のセッションで完了した作業を箇条書き

### 進行中タスク
- 作業途中のものとその現在の状態
- 次に何をすべきか

### 次のステップ
- 次セッションで最初にやるべきこと（優先順位付き）

### 変更ファイル一覧
- 今回変更したファイルのパス一覧

### 未解決の問題
- 残っている課題、確認事項（なければ「なし」）

### コンテキスト情報
- 現在のgitブランチ
- 関連するSPEC/ADR/設計書ファイル名

## 3. `/commit` を実行

`/commit` コマンドのフロー（ドキュメント同期 → 論理グループ分類 → 承認 → コミット＆プッシュ）を実行する。

- SESSION_STATE.md もコミット対象に含める
- `/commit` の承認ゲートがそのまま機能する（ユーザー確認後にコミット＆プッシュ）
- 変更がない場合はスキップ

## 4. Daily 記録

`docs/daily/YYYY-MM-DD.md` に以下を記録:

### 本日完了
- 完了したタスク（1〜3項目）

### 明日の最優先
- 次にやるべきこと（1項目）

### 課題・気づき
- あれば最大1つ

## 5. 完了報告

以下を表示:

```
--- full-save 完了 ---
SESSION_STATE.md: 更新済み
/commit: X件のコミット / スキップ
Daily: docs/daily/YYYY-MM-DD.md

再開方法:
  claude -c  （直前セッション続行）
  claude     （新規セッション）

再開後: 「SESSION_STATE.md を読んで前回の続きから」
---
```
