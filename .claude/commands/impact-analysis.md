---
description: "影響分析 - 変更の波及範囲を事前に特定"
---

# 影響分析

コード変更前に、その変更がプロジェクト全体に与える影響を分析する。
`.claude/rules/phase-rules.md` の BUILDING セクションに基づく事前検証。

## 実行ステップ

1. **変更対象の明確化**
   - 変更するファイル/モジュールを特定
   - 変更の種類（追加/修正/削除）を明記

2. **依存関係の調査**
   - 変更対象を参照しているモジュールを検索
   - 変更対象が依存しているモジュールを検索
   - 依存グラフを可視化（必要に応じて）

3. **波及効果のシミュレーション**

| 影響範囲 | チェック項目 |
|:---------|:-------------|
| **直接影響** | 変更ファイルを source しているファイル |
| **間接影響** | 直接影響を受けるファイルに依存しているファイル |
| **API/IF** | 公開インターフェース（関数シグネチャ）の変更有無 |
| **設定** | 環境変数、設定ファイルへの影響 |
| **テスト** | 影響を受けるテストケース |
| **ドキュメント** | 更新が必要なドキュメント |

4. **リスク評価**

```
## 影響度判定

### 低リスク（局所的変更）
- 影響範囲が 1-2 ファイルに限定
- 公開関数に変更なし
- 既存テストがそのまま使える

### 中リスク（モジュール内変更）
- 影響範囲が 1 モジュール内に収まる
- 内部関数の変更あり
- テストの修正が必要

### 高リスク（横断的変更）
- 複数モジュールに影響
- 公開関数の変更あり
- 大規模なテスト修正が必要
```

5. **報告形式**

```
## 影響分析レポート

### 変更概要
- 対象: [ファイル/モジュール名]
- 種類: [追加/修正/削除]
- 目的: [変更理由]

### 依存関係
- 参照元: [ファイルリスト]
- 参照先: [ファイルリスト]

### 影響範囲
| カテゴリ | 影響 | 詳細 |
|----------|------|------|
| 直接影響 | あり/なし | ... |
| API/IF | あり/なし | ... |
| テスト | あり/なし | ... |
| ドキュメント | あり/なし | ... |

### リスク判定
[低/中/高]

### 推奨アクション
1. [具体的なステップ]
2. [具体的なステップ]
```

## 関連ドキュメント

- `.claude/rules/phase-rules.md` - BUILDING セクション
- `.claude/rules/phase-rules.md` - AUDITING セクション
